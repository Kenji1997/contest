function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],o=!0,i=!1,r=void 0;try{for(var c,a=e[Symbol.iterator]();!(o=(c=a.next()).done)&&(n.push(c.value),!t||n.length!==t);o=!0);}catch(s){i=!0,r=s}finally{try{o||null==a.return||a.return()}finally{if(i)throw r}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{c4Mn:function(e,t,n){"use strict";n.r(t);var o,i,r=n("ofXK"),c=n("tc9g"),a=n("tyNb"),s=n("mrSG"),l=n("he5r"),p=n("quSY"),g=n("fXoL"),b=n("fY/+"),d=((o=function(){function e(){_classCallCheck(this,e),this.defaultPolicyGuide=[{name:"Global Chat",rules:[{topic:"0",riskThreshold:6},{topic:"5",riskThreshold:5}]},{name:"Private Chat",rules:[{topic:"5",riskThreshold:6}]}]}return _createClass(e,[{key:"getPolicyGuides",value:function(){return this.defaultPolicyGuide}}]),e}()).\u0275fac=function(e){return new(e||o)},o.\u0275prov=g.Jb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),u=n("6+BP"),f=((i=function(){function e(t){_classCallCheck(this,e),this.api=t}return _createClass(e,[{key:"search",value:function(e){return this.api.classifyText(e).toPromise()}}]),e}()).\u0275fac=function(e){return new(e||i)(g.bc(u.c))},i.\u0275prov=g.Jb({token:i,factory:i.\u0275fac,providedIn:"root"}),i);function h(e,t){1&e&&(g.Tb(0,"i",6),g.Bc(1,"keyboard_arrow_right"),g.Sb())}var v,m,C,x,_=((v=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||v)},v.\u0275cmp=g.Hb({type:v,selectors:[["app-breadcrumbs"]],decls:7,vars:1,consts:[[1,"breadcrumb"],[1,"breadcrumb__icon"],["routerLink","/"],["src","/assets/comunity_sift-logo-compact.svg","alt","home"],[3,"separator"],["iconTemplate",""],[1,"material-icons"]],template:function(e,t){if(1&e&&(g.Tb(0,"div",0),g.Tb(1,"div",1),g.Tb(2,"a",2),g.Ob(3,"img",3),g.Sb(),g.Sb(),g.Ob(4,"xng-breadcrumb",4),g.zc(5,h,2,0,"ng-template",null,5,g.Ac),g.Sb()),2&e){var n=g.uc(6);g.Cb(4),g.oc("separator",n)}},directives:[a.d,c.a],styles:[".breadcrumb[_ngcontent-%COMP%]{display:flex;align-items:center}.breadcrumb__icon[_ngcontent-%COMP%]{display:inline-block;line-height:0}.breadcrumb__icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:16px}xng-breadcrumb[_ngcontent-%COMP%]     .xng-breadcrumb-separator{color:var(--breadcrumb-arrow-fg)}xng-breadcrumb[_ngcontent-%COMP%]     .xng-breadcrumb-item a{color:var(--breadcrumb-link-fg);text-decoration:none;font:600 11px/20px Open Sans}xng-breadcrumb[_ngcontent-%COMP%]     .xng-breadcrumb-trail{color:var(--breadcrumb-link-active);font:600 11px/20px Open Sans}"]}),v),y=["*"],O=((m=function(){function e(){_classCallCheck(this,e),this.text=""}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||m)},m.\u0275cmp=g.Hb({type:m,selectors:[["app-tooltip"]],inputs:{text:"text"},ngContentSelectors:y,decls:2,vars:1,consts:[[1,"tooltip"]],template:function(e,t){1&e&&(g.nc(),g.Tb(0,"div",0),g.mc(1),g.Sb()),2&e&&g.Db("data-label",t.text)},styles:['.tooltip[_ngcontent-%COMP%]{position:relative;text-align:center}.tooltip[_ngcontent-%COMP%]:hover:after, .tooltip[_ngcontent-%COMP%]:hover:before{opacity:1;visibility:visible}[_ngcontent-%COMP%]:after, [_ngcontent-%COMP%]:before{content:attr(data-label);color:var(--tooltip-fg);background-color:var(--tooltip-bg);padding:0 10px;min-width:50px;white-space:nowrap;display:block;position:absolute;top:calc(100% + 7px);left:50%;transform:translateX(-50%);border-radius:3px;font:400 10px/32px Open Sans}[_ngcontent-%COMP%]:after, [_ngcontent-%COMP%]:before{opacity:0;visibility:hidden;transition:all var(--transition-speed) var(--transition-timing)}[_ngcontent-%COMP%]:after{content:"";top:100%;background-color:transparent;border-left:7px solid transparent;border-right:7px solid transparent;border-bottom:8px solid var(--tooltip-bg);min-width:unset;padding:0}']}),m),k=n("rqRG"),P=n("hr1Q"),M=((C=function(){function e(){_classCallCheck(this,e),this.selectedClient=l.b,this.clientChanged=new g.n,this.clients=[{id:60,name:"Live"},{id:61,name:"Sandbox"},{id:0,name:"Community Sift"}],this.selectBoxList=this.clients.map((function(e){return{content:e.name,value:e.id}}))}return _createClass(e,[{key:"onClientChanged",value:function(e){this.clientChanged.emit(e)}}]),e}()).\u0275fac=function(e){return new(e||C)},C.\u0275cmp=g.Hb({type:C,selectors:[["app-client-picker"]],inputs:{selectedClient:"selectedClient"},outputs:{clientChanged:"clientChanged"},decls:1,vars:2,consts:[[3,"listData","selectedValue","selectChanged"]],template:function(e,t){1&e&&(g.Tb(0,"app-select-box",0),g.fc("selectChanged",(function(e){return t.onClientChanged(e)})),g.Sb()),2&e&&g.oc("listData",t.selectBoxList)("selectedValue",t.selectedClient)},directives:[P.a],styles:["header[_nghost-%COMP%], header   [_nghost-%COMP%]{margin-right:var(--button-spacing)}"]}),C),w=function(e){return{active:e}},S=((x=function(){function e(){_classCallCheck(this,e),this.defaultActive=!1,this._onChanged=new g.n,this.isActive=this.defaultActive}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"onClick",value:function(){this.isActive=!this.isActive,this._onChanged.emit(this.isActive)}}]),e}()).\u0275fac=function(e){return new(e||x)},x.\u0275cmp=g.Hb({type:x,selectors:[["app-toogle-slider"]],inputs:{defaultActive:"defaultActive"},outputs:{_onChanged:"_onChanged"},decls:1,vars:3,consts:[[1,"toggle-slider",3,"ngClass","click"]],template:function(e,t){1&e&&(g.Tb(0,"div",0),g.fc("click",(function(){return t.onClick()})),g.Sb()),2&e&&g.oc("ngClass",g.rc(1,w,t.isActive))},directives:[r.j],styles:['app-toogle-slider[_ngcontent-%COMP%]{line-height:0}.toggle-slider[_ngcontent-%COMP%]{width:36px;height:14px;position:relative;background-color:var(--toggle-slider-bg);border-radius:30px;display:inline-block;cursor:pointer}.toggle-slider[_ngcontent-%COMP%]:after{content:"";display:block;width:20px;height:20px;background-color:var(--toggle-slider-ball-bg);border-radius:50%;position:absolute;top:50%;left:0;transform:translateY(-50%);transition:all .2s var(--transition-timing)}.toggle-slider.active[_ngcontent-%COMP%]{background-color:var(--toggle-slider-active-bg)}.toggle-slider.active[_ngcontent-%COMP%]:after{background-color:var(--toggle-slider-active-ball-bg);left:calc(100% - 20px)}']}),x);function T(e,t){1&e&&(g.Tb(0,"div",2),g.hc(),g.Tb(1,"svg",3),g.Tb(2,"rect",4),g.Ob(3,"animate",5),g.Ob(4,"animate",6),g.Sb(),g.Tb(5,"rect",7),g.Ob(6,"animate",8),g.Ob(7,"animate",9),g.Sb(),g.Tb(8,"rect",10),g.Ob(9,"animate",11),g.Ob(10,"animate",12),g.Sb(),g.Sb(),g.Sb())}function B(e,t){1&e&&(g.Tb(0,"div",13),g.Ob(1,"i",14),g.Tb(2,"p",15),g.Bc(3,"Somethings went wrong !"),g.Sb(),g.Sb())}var L,z=["*"],F=((L=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||L)},L.\u0275cmp=g.Hb({type:L,selectors:[["app-loading-indicator"]],inputs:{error:"error",loading:"loading"},ngContentSelectors:z,decls:3,vars:2,consts:[["class","loader",4,"ngIf"],["class","error",4,"ngIf"],[1,"loader"],["version","1.1","id","Layer_1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","x","0px","y","0px","width","24px","height","30px","viewBox","0 0 24 30",0,"xml","space","preserve",2,"enable-background","new 0 0 50 50"],["x","0","y","13","width","4","height","5","fill","#333"],["attributeName","height","attributeType","XML","values","5;21;5","begin","0s","dur","0.6s","repeatCount","indefinite"],["attributeName","y","attributeType","XML","values","13; 5; 13","begin","0s","dur","0.6s","repeatCount","indefinite"],["x","10","y","13","width","4","height","5","fill","#333"],["attributeName","height","attributeType","XML","values","5;21;5","begin","0.15s","dur","0.6s","repeatCount","indefinite"],["attributeName","y","attributeType","XML","values","13; 5; 13","begin","0.15s","dur","0.6s","repeatCount","indefinite"],["x","20","y","13","width","4","height","5","fill","#333"],["attributeName","height","attributeType","XML","values","5;21;5","begin","0.3s","dur","0.6s","repeatCount","indefinite"],["attributeName","y","attributeType","XML","values","13; 5; 13","begin","0.3s","dur","0.6s","repeatCount","indefinite"],[1,"error"],[1,"mdi","mdi-alert-circle-outline","mdi-48px"],[1,"error-text"]],template:function(e,t){1&e&&(g.nc(),g.zc(0,T,11,0,"div",0),g.zc(1,B,4,0,"div",1),g.mc(2)),2&e&&(g.oc("ngIf",t.loading),g.Cb(1),g.oc("ngIf",t.error))},directives:[r.l],styles:["[_nghost-%COMP%]{margin:var(--section-padding);display:flex;align-items:center;justify-content:center;flex-direction:column;min-height:300px}.error[_ngcontent-%COMP%], .loader[_ngcontent-%COMP%]{margin-bottom:var(--button-spacing);text-align:center}.loader[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transform:scale(1.4)}.loader[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%], .loader[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   rect[_ngcontent-%COMP%]{fill:var(--loading-indicator-fg)}.error[_ngcontent-%COMP%]   i.mdi[_ngcontent-%COMP%]{color:var(--error-indicator-fg)}.error-text[_ngcontent-%COMP%]{color:var(--error-indicator-text-fg);font-size:20px}"]}),L);function I(e,t){if(1&e&&(g.Tb(0,"div",3),g.Ob(1,"i",4),g.Tb(2,"span",5),g.Bc(3),g.Sb(),g.Sb()),2&e){var n=g.ic();g.yc("--level-color",n.riskColor),g.Cb(1),g.Eb(n.topicData.faIcon),g.Cb(2),g.Cc(n.level)}}function A(e,t){if(1&e&&(g.Tb(0,"div",6),g.Ob(1,"i",4),g.Tb(2,"span",7),g.Bc(3),g.Sb(),g.Tb(4,"span",5),g.Bc(5),g.Sb(),g.Sb()),2&e){var n=g.ic();g.yc("--level-color",n.riskColor),g.Cb(1),g.Eb(n.topicData.faIcon),g.Cb(1),g.oc("title",n.topicData.name),g.Cb(1),g.Cc(n.topicData.name),g.Cb(2),g.Cc(n.level)}}var j,D,R,E=((R=function(){function e(){_classCallCheck(this,e),this.type=null}return _createClass(e,[{key:"ngOnInit",value:function(){this.topicData=l.h[this.topic],this.riskColor=l.g[this.level].color}}]),e}()).\u0275fac=function(e){return new(e||R)},R.\u0275cmp=g.Hb({type:R,selectors:[["app-topic"]],inputs:{topic:"topic",level:"level",type:"type"},decls:3,vars:2,consts:[[3,"ngSwitch"],["class","topic topic--compact",3,"--level-color",4,"ngSwitchCase"],["class","topic",3,"--level-color",4,"ngSwitchDefault"],[1,"topic","topic--compact"],[1,"topic__icon","fas"],[1,"topic__risk"],[1,"topic"],[1,"topic__name",3,"title"]],template:function(e,t){1&e&&(g.Tb(0,"container-element",0),g.zc(1,I,4,5,"div",1),g.zc(2,A,6,7,"div",2),g.Sb()),2&e&&(g.oc("ngSwitch",t.type),g.Cb(1),g.oc("ngSwitchCase","compact"))},directives:[r.m,r.n,r.o],styles:['.topic[_ngcontent-%COMP%]{position:relative;padding:4px 34.5px 4px 9px;display:flex;justify-content:space-between;align-items:center;border-radius:4px;overflow:hidden;background-color:var(--topic-comp-bg);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;min-height:38px}.topic[_ngcontent-%COMP%]:hover   .topic__icon[_ngcontent-%COMP%]{color:var(--level-color)}.topic[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;top:0;left:0;height:100%;width:3px;background-color:var(--level-color)}.topic__icon[_ngcontent-%COMP%]{font-size:16px;color:var(--topic-comp-icon-fg);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:all .5s var(--transition-timing)}.topic__name[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:0 10px;color:var(--topic-comp-fg);font:400 14px/20px Open Sans;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.topic__risk[_ngcontent-%COMP%]{position:absolute;right:4.5px;top:50%;transform:translateY(-50%);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:#000;color:#fff;font:700 16px/20px Montserrat;text-align:center;width:30px;height:30px;line-height:30px;border-radius:50%}.topic--compact[_ngcontent-%COMP%]{border-radius:0;padding-right:25px;min-height:22px}.topic--compact[_ngcontent-%COMP%]   .topic__icon[_ngcontent-%COMP%]{font-size:12px}.topic--compact[_ngcontent-%COMP%]   .topic__risk[_ngcontent-%COMP%]{font-size:10px;width:20px;background-color:transparent}']}),R),G=((D=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e,t){return e.replace(/.*_/,"")}}]),e}()).\u0275fac=function(e){return new(e||D)},D.\u0275pipe=g.Mb({name:"rightUnderscore",type:D,pure:!0}),D),H=((j=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e){return l.g[e].color}}]),e}()).\u0275fac=function(e){return new(e||j)},j.\u0275pipe=g.Mb({name:"riskLevelToColor",type:j,pure:!0}),j);function $(e,t){if(1&e&&g.Ob(0,"app-topic",14),2&e){var n=t.$implicit;g.oc("topic",n.key)("level",n.value)}}function N(e,t){if(1&e&&(g.Tb(0,"div",7),g.Tb(1,"div",8),g.Tb(2,"span",9),g.jc(3,"riskLevelToColor"),g.Bc(4),g.Sb(),g.Sb(),g.Tb(5,"div",8),g.Tb(6,"span",10),g.Bc(7),g.Sb(),g.Sb(),g.Tb(8,"div",8),g.Tb(9,"span",11),g.Bc(10),g.Sb(),g.Sb(),g.Tb(11,"div",8),g.Tb(12,"div",12),g.zc(13,$,1,2,"app-topic",13),g.jc(14,"keyvalue"),g.Sb(),g.Sb(),g.Sb()),2&e){var n=t.$implicit,o=g.ic(2);g.Cb(2),g.yc("--rule-risk-level",g.kc(3,6,n.topics[o.generalRiskTopic])),g.Cb(2),g.Cc(n.topics[o.generalRiskTopic]),g.Cb(3),g.Cc(n.text),g.Cb(3),g.Cc(n.language),g.Cb(3),g.oc("ngForOf",g.kc(14,8,n.topics))}}function X(e,t){if(1&e&&(g.Tb(0,"div",2),g.Tb(1,"div",3),g.Bc(2),g.Sb(),g.Tb(3,"div",4),g.jc(4,"riskLevelToColor"),g.Tb(5,"span"),g.Bc(6),g.Sb(),g.Tb(7,"div",5),g.zc(8,N,15,10,"div",6),g.Sb(),g.Sb(),g.Sb()),2&e){var n=t.$implicit;g.Cb(2),g.Cc(n.original),g.Cb(1),g.yc("--bg-color",g.kc(4,5,n.level)),g.Cb(3),g.Cc(n.text),g.Cb(2),g.oc("ngForOf",n.tokens)}}var W,U=((W=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){this.wordDiagnosed=this.handleGroupWord(this.extended),this.generalRiskTopic=l.i}},{key:"handleGroupWord",value:function(e){var t=this;return e.reduce((function(e,n,o){var i=n.text,r=n.original,c=n.tokens;if(""===i){var a=e[o-1],s=a,l=s.original,p=s.tokens;l="".concat(l," ").concat(r),p=t.mergeTokens(p,c),a=Object.assign(a,{original:l,tokens:p})}else{var g=t.wordFromSlot(n);e.push(g)}return e}),[])}},{key:"wordFromSlot",value:function(e){var t=e.text,n=e.solution,o=e.original,i=e.tokens,r=i.find((function(e){return e.text===n})).topics[l.i],c=i.reverse();return{text:t,original:o,level:r,tokens:this.mergeTokens(c)}}},{key:"mergeTokens",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=t.flat().reduce((function(e,t){return e.hasOwnProperty(t.text)||(e[t.text]=t),e}),{});return Object.values(o)}}]),e}()).\u0275fac=function(e){return new(e||W)},W.\u0275cmp=g.Hb({type:W,selectors:[["app-diagnose-text"]],inputs:{extended:"extended"},decls:2,vars:1,consts:[[1,"diagnose-text"],["class","text-box",4,"ngFor","ngForOf"],[1,"text-box"],[1,"text__item","original"],[1,"text__item","solution"],[1,"table","detail-box"],["class","tr",4,"ngFor","ngForOf"],[1,"tr"],[1,"td"],[1,"risk-level"],[1,"name"],[1,"language"],[1,"topics"],["type","compact",3,"topic","level",4,"ngFor","ngForOf"],["type","compact",3,"topic","level"]],template:function(e,t){1&e&&(g.Tb(0,"div",0),g.zc(1,X,9,7,"div",1),g.Sb()),2&e&&(g.Cb(1),g.oc("ngForOf",t.wordDiagnosed))},directives:[r.k,E],pipes:[H,r.f],styles:[".diagnose-text[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:100%;background-color:var(--diagnose-text-bg);padding:15px 13px 0}.text-box[_ngcontent-%COMP%]{margin-bottom:30px}.text-box[_ngcontent-%COMP%]:not(:last-child){margin-right:15px}.text__item[_ngcontent-%COMP%]{padding:10px 22px;border-radius:4px;font:600 20px/24px Open Sans}.original[_ngcontent-%COMP%]{background-color:var(--diagnose-text-original-bg);color:var(--diagnose-text-original-fg);margin-bottom:18px}.solution[_ngcontent-%COMP%]{background-color:var(--bg-color);color:var(--diagnose-text-solution-fg);position:relative}.solution[_ngcontent-%COMP%]:hover   .detail-box[_ngcontent-%COMP%]{opacity:1;visibility:visible}.detail-box[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;z-index:10;background-color:var(--diagnose-text-deatil-box-bg);max-height:var(--diagnose-text-deatil-box-max-height);overflow-y:auto;border-radius:2px 2px 4px 4px;opacity:0;visibility:hidden;transition:all var(--transition-speed) var(--transition-timing)}.detail-box[_ngcontent-%COMP%]::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.3);background-color:#414d55}.detail-box[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px;background-color:#f5f5f5}.detail-box[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:10px;box-sizing:border-box;border:3px solid #414d55;background-color:#1b1f20}.detail-box[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]{display:table-row}.detail-box[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]:hover{background-color:var(--diagnose-text-deatil-box-hover-bg)}.detail-box[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]:hover   .topics[_ngcontent-%COMP%]{opacity:1;visibility:visible}.detail-box[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]:not(:last-child)   .td[_ngcontent-%COMP%]{border-bottom:1px solid var(--diagnose-text-deatil-box-hover-bg)}.detail-box[_ngcontent-%COMP%]   .td[_ngcontent-%COMP%]{display:table-cell;padding:7px 0}.detail-box[_ngcontent-%COMP%]   .td[_ngcontent-%COMP%]:first-child{padding-left:10px}.detail-box[_ngcontent-%COMP%]   .td[_ngcontent-%COMP%]:last-child{padding-right:10px}.risk-level[_ngcontent-%COMP%]{line-height:20px;font-size:12px;font-weight:700;text-align:center;color:#333;margin-right:10px;display:inline-block;width:25px;height:20px;border-top-left-radius:20px;border-bottom-left-radius:20px;background-color:var(--rule-risk-level)}.name[_ngcontent-%COMP%]{color:#fff;font:400 13px/20px Open Sans}.language[_ngcontent-%COMP%], .name[_ngcontent-%COMP%]{margin-right:10px}.language[_ngcontent-%COMP%]{color:var(--diagnose-text-language-fg);font-size:12px}.topics[_ngcontent-%COMP%]{display:flex;align-items:center;opacity:0;visibility:hidden;transition:all var(--transition-speed) var(--transition-timing)}.topics[_ngcontent-%COMP%]   app-topic[_ngcontent-%COMP%]:not(:last-child){margin-right:10px}"]}),W),Y=function(e){return{active:e}};function q(e,t){if(1&e){var n=g.Ub();g.Tb(0,"li",5),g.fc("click",(function(){g.vc(n);var e=t.$implicit;return g.ic().onSelect(e.key,e.value)})),g.Bc(1),g.Sb()}if(2&e){var o=t.$implicit,i=g.ic();g.oc("ngClass",g.rc(2,Y,i.isSelected(o.key))),g.Cb(1),g.Dc(" ",o.value.name," ")}}var J,V=((J=function(){function e(){_classCallCheck(this,e),this.title="Add more topics",this.topics=l.h,this.selecteds={},this.maximumItemShow=8,this.topicSelected={},this._onSelectChanged=new g.n,this.originalOrder=function(e,t){return 0}}return _createClass(e,[{key:"ngOnInit",value:function(){for(var e in this.topics)this.topicSelected.hasOwnProperty(e)&&(this.selecteds[e]=this.topics[e])}},{key:"onMouseEnter",value:function(){this.title="Choose Topic"}},{key:"onMouseLeave",value:function(){this.title="Add more topics"}},{key:"onSelect",value:function(e,t){this.selecteds.hasOwnProperty(e)?delete this.selecteds[e]:this.selecteds[e]=t,this._onSelectChanged.emit(this.selecteds)}},{key:"isSelected",value:function(e){return this.selecteds.hasOwnProperty(e)}}]),e}()).\u0275fac=function(e){return new(e||J)},J.\u0275cmp=g.Hb({type:J,selectors:[["app-topic-picker"]],inputs:{maximumItemShow:"maximumItemShow",topicSelected:"topicSelected"},outputs:{_onSelectChanged:"_onSelectChanged"},decls:8,vars:7,consts:[[1,"select-box",3,"mouseenter","mouseleave"],[1,"select-box__selected"],[1,"material-icons","select-box__icon"],[1,"select-box__list"],["class","select-box__item",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"select-box__item",3,"ngClass","click"]],template:function(e,t){1&e&&(g.Tb(0,"div",0),g.fc("mouseenter",(function(){return t.onMouseEnter()}))("mouseleave",(function(){return t.onMouseLeave()})),g.Tb(1,"div",1),g.Bc(2),g.Sb(),g.Tb(3,"i",2),g.Bc(4,"keyboard_arrow_down"),g.Sb(),g.Tb(5,"ul",3),g.zc(6,q,2,4,"li",4),g.jc(7,"keyvalue"),g.Sb(),g.Sb()),2&e&&(g.Cb(2),g.Cc(t.title),g.Cb(3),g.yc("--data-maximum",t.maximumItemShow),g.Cb(1),g.oc("ngForOf",g.lc(7,4,t.topics,t.originalOrder)))},directives:[r.k,r.j],pipes:[r.f],styles:['.select-box[_ngcontent-%COMP%]{position:relative;cursor:pointer;font-size:12px;transition:background-color .3s var(--transition-timing);background-color:var(--select-box-bg);width:var(--select-box-default-width);padding:var(--select-box-padding);border-radius:var(--select-box-radius)}.select-box__icon[_ngcontent-%COMP%]{color:var(--select-box-arrow-fg);font-size:18px;position:absolute;right:10px;top:50%;transition:transform .3s var(--transition-timing);transform:translateY(-50%);transform-origin:50% 45%}.select-box[_ngcontent-%COMP%]   .select-box__list[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;width:100%;padding:5px 0 10px;background-color:var(--select-box-hover-bg);border-bottom-left-radius:var(--select-box-radius);border-bottom-right-radius:var(--select-box-radius);overflow-y:auto;max-height:calc(var(--select-box-default-item-height)*var(--data-maximum));opacity:0;visibility:hidden;transition:all var(--transition-speed) var(--transition-timing)}.select-box[_ngcontent-%COMP%]   .select-box__list[_ngcontent-%COMP%]::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.3);background-color:#414d55}.select-box[_ngcontent-%COMP%]   .select-box__list[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px;background-color:#f5f5f5}.select-box[_ngcontent-%COMP%]   .select-box__list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:10px;box-sizing:border-box;border:3px solid #414d55;background-color:#1b1f20}.select-box__item[_ngcontent-%COMP%]{padding:0 .75em 0 3.5em;height:var(--select-box-default-item-height);line-height:var(--select-box-default-item-height);color:var(--select-box-item-fg);position:relative;transition:all .3s var(--transition-timing)}.select-box__item[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;width:13px;height:13px;border-radius:3px;background-color:transparent;top:50%;transform:translateY(-50%);left:1em;border:2px solid var(--topic-picker-square-bc);transition:all var(--transition-speed) var(--transition-timing)}.select-box__item.active[_ngcontent-%COMP%]:before{background-color:var(--topic-picker-tick-bg)}.select-box[_ngcontent-%COMP%]:hover{background-color:var(--select-box-hover-bg);border-bottom-left-radius:0;border-bottom-right-radius:0}.select-box[_ngcontent-%COMP%]:hover   .select-box__icon[_ngcontent-%COMP%]{transform:translateY(-50%) rotate(180deg)}.select-box[_ngcontent-%COMP%]:hover   .select-box__list[_ngcontent-%COMP%]{opacity:1;visibility:visible}']}),J),K=function(e){return{active:e}};function Q(e,t){if(1&e){var n=g.Ub();g.Tb(0,"app-tooltip",24),g.Tb(1,"div",25),g.fc("click",(function(){g.vc(n);var e=t.$implicit,o=g.ic().$implicit;return g.ic().onChangeLevel(o,e.key)})),g.Bc(2),g.Sb(),g.Sb()}if(2&e){var o=t.$implicit,i=g.ic().$implicit;g.oc("text",o.value.name),g.Cb(1),g.yc("--background-color",o.value.color),g.oc("ngClass",g.rc(6,K,o.key==i.level)),g.Db("data-label",o.value.name),g.Cb(1),g.Dc("",o.key," ")}}function Z(e,t){if(1&e&&(g.Tb(0,"div",19),g.Ob(1,"i",20),g.Tb(2,"p",21),g.Bc(3),g.Sb(),g.Tb(4,"div",22),g.zc(5,Q,3,8,"app-tooltip",23),g.jc(6,"keyvalue"),g.Sb(),g.Sb()),2&e){var n=t.$implicit,o=g.ic();g.Cb(1),g.Eb(n.icon),g.Cb(1),g.oc("title",n.name),g.Cb(1),g.Cc(n.name),g.Cb(2),g.oc("ngForOf",g.kc(6,5,o.riskLevels))}}var ee,te,ne,oe=function(e){return{show:e}},ie=((ee=function(){function e(){_classCallCheck(this,e),this.defaultLanguage=l.d,this.topicArray=[],this.riskLevels=l.g,this.topics={},this.isShow=!1,this._close=new g.n}return _createClass(e,[{key:"ngOnInit",value:function(){this.topicArray=Object.entries(this.topics).map((function(e){var t=_slicedToArray(e,2),n=t[0],o=t[1],i=l.h[n];return{name:i.name,level:o,icon:i.faIcon,riskColor:l.g[o].color}}))}},{key:"onClose",value:function(){console.log("[app-regression-test-box] onClose exec ..."),this.isShow=!1,this._close.emit(!1)}},{key:"onLanguageChanged",value:function(e){console.log("[app-regression-test-box] onLanguageChanged selected language: ",e)}},{key:"onChangeLevel",value:function(e,t){console.log("[app-regression-test-box] onChangeLevel get currentTopic: [%s], newLevel: [%s]",e,t)}},{key:"onTopicPickerChanged",value:function(e){console.log("[app-regression-test-box] onTopicPickerChanged get topicSelected: ",e)}}]),e}()).\u0275fac=function(e){return new(e||ee)},ee.\u0275cmp=g.Hb({type:ee,selectors:[["app-regression-test-box"]],inputs:{topics:"topics",isShow:"isShow"},outputs:{_close:"_close"},decls:32,vars:6,consts:[[1,"regression-wrapper",3,"ngClass"],[1,"overlay",3,"click"],[1,"regression-box"],[1,"title"],[1,"label-box"],[1,"box-title"],[1,"topics"],["class","topic-item",4,"ngFor","ngForOf"],[1,"topic-box"],[3,"topicSelected","onSelectChanged"],[1,"language-box"],[3,"selectedLanguage","languageChanged"],[1,"comment"],["name","","id","","rows","4","placeholder","Type your Comment (Optional)"],[1,"button-group"],[1,"item","button--light-green"],[1,"item","button--black",3,"click"],[1,"button-close",3,"click"],[1,"material-icons"],[1,"topic-item"],[1,"topic__icon","fas"],[1,"topic__name",3,"title"],[1,"topic__level"],[3,"text",4,"ngFor","ngForOf"],[3,"text"],[1,"level",3,"ngClass","click"]],template:function(e,t){1&e&&(g.Tb(0,"div",0),g.Tb(1,"div",1),g.fc("click",(function(){return t.onClose()})),g.Sb(),g.Tb(2,"div",2),g.Tb(3,"h4",3),g.Bc(4,"Add it to the regression tests"),g.Sb(),g.Tb(5,"div",4),g.Tb(6,"p",5),g.Bc(7,"How should it be labelled"),g.Sb(),g.Tb(8,"div",6),g.zc(9,Z,7,7,"div",7),g.Sb(),g.Sb(),g.Tb(10,"div",8),g.Tb(11,"p",5),g.Bc(12,"Add Topics"),g.Sb(),g.Tb(13,"app-topic-picker",9),g.fc("onSelectChanged",(function(e){return t.onTopicPickerChanged(e)})),g.Sb(),g.Sb(),g.Tb(14,"div",10),g.Tb(15,"p",5),g.Bc(16,"Wrong Language?"),g.Sb(),g.Tb(17,"app-language-picker",11),g.fc("languageChanged",(function(e){return t.onLanguageChanged(e)})),g.Sb(),g.Sb(),g.Tb(18,"div",12),g.Tb(19,"p",5),g.Bc(20,"Leave a comment"),g.Sb(),g.Ob(21,"textarea",13),g.Sb(),g.Tb(22,"div",14),g.Tb(23,"button",15),g.Bc(24,"Apply"),g.Sb(),g.Tb(25,"button",16),g.fc("click",(function(){return t.onClose()})),g.Bc(26,"Cancel"),g.Sb(),g.Sb(),g.Tb(27,"div",17),g.fc("click",(function(){return t.onClose()})),g.Tb(28,"i",18),g.Bc(29,"close"),g.Sb(),g.Tb(30,"span"),g.Bc(31,"Close"),g.Sb(),g.Sb(),g.Sb(),g.Sb()),2&e&&(g.oc("ngClass",g.rc(4,oe,t.isShow)),g.Cb(9),g.oc("ngForOf",t.topicArray),g.Cb(4),g.oc("topicSelected",t.topics),g.Cb(4),g.oc("selectedLanguage",t.defaultLanguage))},directives:[r.j,r.k,V,k.a,O],pipes:[r.f],styles:['.regression-wrapper[_ngcontent-%COMP%]{opacity:0;visibility:hidden;transition:all var(--transition-speed) var(--transition-timing)}.regression-wrapper.show[_ngcontent-%COMP%]{opacity:1;visibility:visible}.regression-box[_ngcontent-%COMP%]{display:grid;grid-template-areas:"title          title" "label-box      label-box" "topic-select   language-select" "comment        comment" "button-group   button-group";grid-template-columns:1fr 1fr;grid-template-rows:repeat(5,-webkit-min-content);grid-template-rows:repeat(5,min-content);background-color:var(--regression-test-bg);height:100%;grid-gap:1.78rem;padding:1.78rem;position:relative;z-index:2}.title[_ngcontent-%COMP%]{grid-area:title;font:400 16px/20px Montserrat;padding-bottom:1.78125em;margin:0;border-bottom:1px solid var(--regression-test-title-border-bg)}.box-title[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{color:var(--regression-test-title-fg)}.box-title[_ngcontent-%COMP%]{font:400 12px/20px Open Sans;margin:0 0 1.15em}.label-box[_ngcontent-%COMP%]{grid-area:label-box;margin-bottom:.4em}.topic-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:13px;background-color:var(--regression-test-topic-bg)}.topic-item[_ngcontent-%COMP%]:not(:last-child){margin-bottom:1.15em}.topic__icon[_ngcontent-%COMP%]{font-size:16px;color:var(--regression-test-icon-fg);margin-right:12px}.topic__name[_ngcontent-%COMP%]{margin:0;width:100%;color:var(--regression-test-name-fg);font:400 14px/20px Open Sans;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.topic__level[_ngcontent-%COMP%]{display:flex;align-items:center}.topic__level[_ngcontent-%COMP%]   app-tooltip[_ngcontent-%COMP%]:not(:last-child){margin-right:11px}.topic__level[_ngcontent-%COMP%]   app-tooltip[_ngcontent-%COMP%]:first-child   .level[_ngcontent-%COMP%]{border-radius:4px 0 0 4px}.topic__level[_ngcontent-%COMP%]   app-tooltip[_ngcontent-%COMP%]:last-child   .level[_ngcontent-%COMP%]{border-radius:0 4px 4px 0}.topic__level[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]{position:relative;width:38px;height:38px;text-align:center;color:var(--regression-test-topic-fg);background-color:var(--regression-test-topic-level-bg);transition:all var(--transition-speed) var(--transition-timing);font:700 14px/38px Open Sans;cursor:pointer}.topic__level[_ngcontent-%COMP%]   .level.active[_ngcontent-%COMP%], .topic__level[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]:hover{background-color:var(--background-color);color:var(--regression-test-topic-active-fg)}.topic-box[_ngcontent-%COMP%]{grid-area:topic-select}.language-box[_ngcontent-%COMP%]{grid-area:language-select}app-language-picker[_ngcontent-%COMP%]  .select-box, app-topic-picker[_ngcontent-%COMP%]  .select-box{width:100%}.comment[_ngcontent-%COMP%]{grid-area:comment;margin-bottom:24px}.comment[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font:600 .78rem/1.7 Montserrat;padding:1.7em 1.1em;background-color:var(--regression-test-textarea-bg);border:none;display:block;width:100%;color:var(--regression-test-textarea-fg)}.comment[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::-webkit-input-placeholder{color:var(--regression-test-textarea-placeholder-fg)}.comment[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::-moz-placeholder{color:var(--regression-test-textarea-placeholder-fg)}.comment[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::-ms-input-placeholder{color:var(--regression-test-textarea-placeholder-fg)}.comment[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:var(--regression-test-textarea-placeholder-fg)}.button-group[_ngcontent-%COMP%]{grid-area:"button-group";font-size:0;display:flex;align-items:center;flex:1}.button-group[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{display:inline-block}.button-group[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:not(:last-child){margin-right:14px}.button-close[_ngcontent-%COMP%]{position:absolute;top:1.78rem;right:1.78rem;display:flex;align-items:center;font:400 14px/20px Montserrat;text-transform:uppercase;cursor:pointer;transition:color var(--transition-speed) var(--transition-timing)}.button-close[_ngcontent-%COMP%]:hover{color:var(--accent-highlight)}.button-close[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-weight:700;font-size:18px;margin-right:7px}.overlay[_ngcontent-%COMP%]{position:fixed;z-index:-1;right:0;top:0;width:100%;height:100%;background-color:rgba(0,0,0,.7)}']}),ee),re={icon:"fas fa-thumbs-up",color:"#7ED321"},ce={icon:"fas fa-thumbs-down",color:"#ED0423"},ae=((ne=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this.policy,t=e.isSafe,n=e.policyGuide,o=t?re:ce,i=o.icon,r=o.color;this.icon=i,this.color=r,this.name=n.name}}]),e}()).\u0275fac=function(e){return new(e||ne)},ne.\u0275cmp=g.Hb({type:ne,selectors:[["app-policy-guide"]],inputs:{policy:"policy"},decls:4,vars:6,consts:[[1,"policy"],[1,"policy__icon","fas"],[1,"policy__name",3,"title"]],template:function(e,t){1&e&&(g.Tb(0,"div",0),g.Ob(1,"i",1),g.Tb(2,"span",2),g.Bc(3),g.Sb(),g.Sb()),2&e&&(g.yc("--color",t.color),g.Cb(1),g.Eb(t.icon),g.Cb(1),g.oc("title",t.name),g.Cb(1),g.Cc(t.name))},styles:['.policy[_ngcontent-%COMP%]{position:relative;padding:4px 4.5px 4px 9px;display:flex;justify-content:space-between;align-items:center;border-radius:4px;overflow:hidden;background-color:var(--policy-comp-bg);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;min-height:38px}.policy[_ngcontent-%COMP%]:before{content:"";display:block;position:absolute;top:0;left:0;height:100%;width:3px;background-color:var(--color)}.policy__icon[_ngcontent-%COMP%]{font-size:16px;color:var(--policy-comp-icon-fg);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:all .5s var(--transition-timing)}.policy__name[_ngcontent-%COMP%]{display:inline-block;width:100%;padding:0 10px;color:var(--policy-comp-fg);font:400 14px/20px Open Sans;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}']}),ne),se=((te=function(){function e(){_classCallCheck(this,e),this.percent="0"}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;setTimeout((function(){e.percent=Math.round(100*e.value)+"%"}),400)}}]),e}()).\u0275fac=function(e){return new(e||te)},te.\u0275cmp=g.Hb({type:te,selectors:[["app-progress-bar"]],inputs:{label:"label",value:"value"},decls:6,vars:4,consts:[[1,"progress-bar"],[1,"label"],[1,"line"],[1,"percent-text"]],template:function(e,t){1&e&&(g.Tb(0,"div",0),g.Tb(1,"span",1),g.Bc(2),g.Sb(),g.Ob(3,"div",2),g.Tb(4,"span",3),g.Bc(5),g.Sb(),g.Sb()),2&e&&(g.Cb(2),g.Cc(t.label),g.Cb(1),g.yc("--percent",t.percent),g.Cb(2),g.Cc(t.percent))},styles:['.progress-bar[_ngcontent-%COMP%]{color:var(--progress-bar-fg);display:flex;align-items:center;justify-content:space-between}.label[_ngcontent-%COMP%], .progress-bar[_ngcontent-%COMP%]{font:600 16px/20px Open Sans}.label[_ngcontent-%COMP%]{width:20.5%;padding-right:10px;box-sizing:border-box;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.percent-text[_ngcontent-%COMP%]{width:45px;text-align:right;display:inline-block}.line[_ngcontent-%COMP%]{width:68%;height:5px;background-color:var(--progress-bar-line-bg);border-radius:10px;overflow:hidden;position:relative}.line[_ngcontent-%COMP%]:before{content:"";position:absolute;display:block;background-color:var(--progress-bar-line-success-bg);width:var(--percent);height:100%;transition:all .7s var(--transition-timing)}']}),te);function le(e,t){if(1&e&&(g.Tb(0,"p",43),g.Bc(1),g.Sb()),2&e){var n=t.$implicit;g.Cb(1),g.Cc(n.original)}}function pe(e,t){if(1&e&&g.Ob(0,"app-topic",46),2&e){var n=t.$implicit;g.oc("topic",n.key)("level",n.value)}}function ge(e,t){if(1&e&&(g.Tb(0,"div",44),g.zc(1,pe,1,2,"app-topic",33),g.jc(2,"keyvalue"),g.Tb(3,"span",45),g.Bc(4),g.Sb(),g.Sb()),2&e){var n=t.$implicit;g.Cb(1),g.oc("ngForOf",g.kc(2,2,n.failTopic)),g.Cb(3),g.Cc(n.text)}}function be(e,t){if(1&e&&g.Ob(0,"app-topic",46),2&e){var n=t.$implicit;g.oc("topic",n.key)("level",n.value)}}function de(e,t){1&e&&g.Ob(0,"app-policy-guide",47),2&e&&g.oc("policy",t.$implicit)}function ue(e,t){if(1&e&&(g.Ob(0,"app-progress-bar",48),g.jc(1,"rightUnderscore")),2&e){var n=t.$implicit;g.oc("label",g.kc(1,2,n.key))("value",n.value)}}var fe=function(e){return{show:e}};function he(e,t){if(1&e){var n=g.Ub();g.Tb(0,"div",19),g.Tb(1,"div",20),g.Ob(2,"app-diagnose-text",21),g.Tb(3,"div",22),g.Tb(4,"h4",23),g.Bc(5,"Spelling Mistakes"),g.Sb(),g.Tb(6,"div",24),g.zc(7,le,2,1,"p",25),g.Sb(),g.Tb(8,"h4",23),g.Bc(9,"What caused which tag"),g.Sb(),g.Tb(10,"div",26),g.zc(11,ge,5,4,"div",27),g.Sb(),g.Sb(),g.Sb(),g.Tb(12,"div",28),g.Tb(13,"div",29),g.Bc(14),g.Sb(),g.Tb(15,"div",30),g.Tb(16,"div",31),g.Tb(17,"h5",32),g.Bc(18,"Topics"),g.Sb(),g.zc(19,be,1,2,"app-topic",33),g.jc(20,"keyvalue"),g.Sb(),g.Tb(21,"div",34),g.Tb(22,"h5",32),g.Bc(23,"Policy Guides"),g.Sb(),g.zc(24,de,1,1,"app-policy-guide",35),g.Sb(),g.Sb(),g.Tb(25,"div",36),g.Tb(26,"h5",32),g.Bc(27,"AI Prediction"),g.Sb(),g.zc(28,ue,2,4,"app-progress-bar",37),g.jc(29,"keyvalue"),g.Sb(),g.Tb(30,"div",38),g.Tb(31,"button",39),g.fc("click",(function(){return g.vc(n),g.ic().onShowRegressionBox()})),g.Bc(32,"Escalate"),g.Sb(),g.Tb(33,"button",40),g.Bc(34,"Gerkin Test"),g.Sb(),g.Tb(35,"button",41),g.Bc(36,"Create Rule"),g.Sb(),g.Sb(),g.Sb(),g.Tb(37,"app-regression-test-box",42),g.fc("_close",(function(){return g.vc(n),g.ic().onCloseRegressionBox()})),g.Sb(),g.Sb()}if(2&e){var o=g.ic();g.Cb(2),g.oc("extended",o.extended),g.Cb(1),g.oc("ngClass",g.rc(14,fe,o.isDeep)),g.Cb(4),g.oc("ngForOf",o.failingFragments),g.Cb(4),g.oc("ngForOf",o.failingFragments),g.Cb(3),g.Cc(o.keyWord),g.Cb(5),g.oc("ngForOf",g.kc(20,10,o.topics)),g.Cb(5),g.oc("ngForOf",o.policies),g.Cb(4),g.oc("ngForOf",g.kc(29,12,o.predictions)),g.Cb(9),g.oc("isShow",o.isShowRegressionBox)("topics",o.topics)}}var ve,me,Ce=[{path:"",component:(ve=function(){function e(t,n,o,i){_classCallCheck(this,e),this.userService=t,this.policyService=n,this.diagnoseService=o,this.route=i,this.isDeep=!1,this.isLoading=!0,this.isShowRegressionBox=!1,this.isError=!1,this.keyWord="",this.predictions={},this.topics={},this.policyGuides=[],this.policies=[],this.failingFragments=[],this.extended=[],this.selectedContentType=l.c,this.contentTypeList=l.a,this.isDefaultActiveDeeperAnalysis=!1,this.searchSubscription=new p.a,this.searchInput={text:"",clientId:l.b,language:l.d,contentType:l.c}}return _createClass(e,[{key:"ngOnInit",value:function(){return Object(s.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.userService.me();case 2:this.user=e.sent,this.policyGuides=this.policyService.getPolicyGuides(),this.searchSubscription.add(this.route.queryParams.subscribe((function(e){if(e.hasOwnProperty(l.e)){var n=t.userService.preferences,o=n.lastClientId,i=n.lastContentType,r=n.language;t.searchInput={text:e[l.e],clientId:o,contentType:i,language:r},t.onSearch()}else t.isLoading=!1,t.isError=!0})));case 5:case"end":return e.stop()}}),e,this)})))}},{key:"ngOnDestroy",value:function(){this.searchSubscription.unsubscribe()}},{key:"onSearch",value:function(){return Object(s.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.isError=!1,this.isLoading=!0,e.next=4,this.diagnoseService.search(this.searchInput);case 4:t=e.sent,this.keyWord=t.text,this.predictions=t.predictions,this.extended=t.extended,n=t.topics,this.topics=this.handleTopics(n,this.policyGuides),o=this.handlePolicies(n,this.policyGuides),i=o.policyModels,this.policies=i,this.hideLoading(),this.failingFragments=this.handleFailingFragments(t.failingFragments,this.policyGuides,this.keyWord),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("[Diagnose Component] onSearch get error: ",e.t0),this.isLoading=!1,this.isError=!0;case 15:case"end":return e.stop()}}),e,this,[[0,12]])})))}},{key:"handleTopics",value:function(e,t){var n=t.map((function(e){return e.rules})).flat().map((function(e){return e.topic}));for(var o in e)n.includes(o)||delete e[o];return e}},{key:"handlePolicies",value:function(e,t){var n={};return{policyModels:t.map((function(t){var o=!0,i=!0,r=!1,c=void 0;try{for(var a,s=t.rules[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value,p=l.topic;if(e.hasOwnProperty(p)){var g=e[p];g>=l.riskThreshold&&(n[p]=g,o=!1)}}}catch(b){r=!0,c=b}finally{try{i||null==s.return||s.return()}finally{if(r)throw c}}return{isSafe:o,policyGuide:t}})),failTopic:n}}},{key:"handleFailingFragments",value:function(e,t,n){var o=this;return e.map((function(e){var i=e.topics,r=e.startPos,c=e.endPos,a=o.handlePolicies(i,t).failTopic,s=n.slice(r,c);return Object.assign(Object.assign({},e),{failTopic:a,original:s})}))}},{key:"hideLoading",value:function(){var e=this;setTimeout((function(){e.isLoading=!1}),300)}},{key:"onRefresh",value:function(){this.onSearch()}},{key:"onLanguageChanged",value:function(e){this.searchInput.language=e,this.userService.updatePreferences({language:e})}},{key:"onContentTypeChanged",value:function(e){this.searchInput.contentType=e,this.userService.updatePreferences({lastContentType:e})}},{key:"onUserChangedClient",value:function(e){this.searchInput.clientId=e,this.userService.updatePreferences({lastClientId:e})}},{key:"onDeeperAnalysisChanged",value:function(e){this.isDeep=e}},{key:"onShowRegressionBox",value:function(){this.isShowRegressionBox=!0}},{key:"onCloseRegressionBox",value:function(){this.isShowRegressionBox=!1}},{key:"onCopy",value:function(){var e=window.location.href,t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}}]),e}(),ve.\u0275fac=function(e){return new(e||ve)(g.Nb(b.a),g.Nb(d),g.Nb(f),g.Nb(a.a))},ve.\u0275cmp=g.Hb({type:ve,selectors:[["app-diagnose"]],decls:24,vars:8,consts:[["id","diagnose"],[1,"header"],[1,"left-content"],[1,"title"],[1,"header-breadcrumb"],[1,"copy-button",3,"click"],["text","Copy URL to Clipboard"],["src","/assets/icons/copy.svg","alt","copy"],[1,"right-content"],[1,"refresh-button",3,"click"],["text","Refresh"],[1,"material-icons"],["type","code",1,"language--code",3,"selectedLanguage","languageChanged"],[3,"listData","selectedValue","selectChanged"],[3,"selectedClient","clientChanged"],[1,"deeper-analysis-box"],[3,"defaultActive","_onChanged"],[3,"loading","error"],["class","diagnose-main-content",4,"ngIf"],[1,"diagnose-main-content"],[1,"diagnose-text"],[3,"extended"],[1,"deeper-box",3,"ngClass"],[1,"deeper__title"],[1,"spelling-mistake"],["class","spelling-mistake__text",4,"ngFor","ngForOf"],[1,"fail-topic"],["class","fail-topic__item",4,"ngFor","ngForOf"],[1,"diagnose-side"],[1,"side-item","keyword"],[1,"side-item","topic-policy"],[1,"topic-box"],[1,"side-item-title"],[3,"topic","level",4,"ngFor","ngForOf"],[1,"policy-box"],[3,"policy",4,"ngFor","ngForOf"],[1,"side-item","ai-prediction"],[3,"label","value",4,"ngFor","ngForOf"],[1,"button-group"],[1,"item","button--grey",3,"click"],[1,"item","button--fountain-blue"],[1,"item","button--light-green"],[3,"isShow","topics","_close"],[1,"spelling-mistake__text"],[1,"fail-topic__item"],[1,"fail-topic__text"],[3,"topic","level"],[3,"policy"],[3,"label","value"]],template:function(e,t){1&e&&(g.Tb(0,"section",0),g.Tb(1,"div",1),g.Tb(2,"div",2),g.Tb(3,"h3",3),g.Bc(4,"Diagnose"),g.Sb(),g.Tb(5,"div",4),g.Ob(6,"app-breadcrumbs"),g.Tb(7,"div",5),g.fc("click",(function(){return t.onCopy()})),g.Tb(8,"app-tooltip",6),g.Ob(9,"img",7),g.Sb(),g.Sb(),g.Sb(),g.Sb(),g.Tb(10,"div",8),g.Tb(11,"div",9),g.fc("click",(function(){return t.onRefresh()})),g.Tb(12,"app-tooltip",10),g.Tb(13,"i",11),g.Bc(14,"autorenew"),g.Sb(),g.Sb(),g.Sb(),g.Tb(15,"app-language-picker",12),g.fc("languageChanged",(function(e){return t.onLanguageChanged(e)})),g.Sb(),g.Tb(16,"app-select-box",13),g.fc("selectChanged",(function(e){return t.onContentTypeChanged(e)})),g.Sb(),g.Tb(17,"app-client-picker",14),g.fc("clientChanged",(function(e){return t.onUserChangedClient(e)})),g.Sb(),g.Tb(18,"div",15),g.Tb(19,"app-toogle-slider",16),g.fc("_onChanged",(function(e){return t.onDeeperAnalysisChanged(e)})),g.Sb(),g.Tb(20,"span"),g.Bc(21,"Deeper Analysis"),g.Sb(),g.Sb(),g.Sb(),g.Sb(),g.Tb(22,"app-loading-indicator",17),g.zc(23,he,38,16,"div",18),g.Sb(),g.Sb()),2&e&&(g.Cb(15),g.oc("selectedLanguage",t.userService.preferences.language),g.Cb(1),g.oc("listData",t.contentTypeList)("selectedValue",t.userService.preferences.lastContentType),g.Cb(1),g.oc("selectedClient",t.userService.preferences.lastClientId),g.Cb(2),g.oc("defaultActive",t.isDefaultActiveDeeperAnalysis),g.Cb(3),g.oc("loading",t.isLoading)("error",t.isError),g.Cb(1),g.oc("ngIf",!t.isLoading&&!t.isError))},directives:[_,O,k.a,P.a,M,S,F,r.l,U,r.j,r.k,ie,E,ae,se],pipes:[r.f,G],styles:["[_nghost-%COMP%]{flex:1}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:18px;position:relative;z-index:100}.diagnose-main-content[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:auto 398px;grid-gap:16px}.diagnose-side[_ngcontent-%COMP%]{padding:30px 13px 29px;background-color:var(--diagnose-side-bg)}.title[_ngcontent-%COMP%]{padding:0;margin:0 0 12px;font:700 20px/24px Montserrat;color:#f4f4f4;text-transform:capitalize}.right-content[_ngcontent-%COMP%]{display:flex;align-items:center}.right-content[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(:first-child){margin-left:14px}.deeper-analysis-box[_ngcontent-%COMP%]{display:flex;align-items:center}.deeper-analysis-box[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--deeper-analysis-text-fg);font-size:12px;margin-left:10px}app-toogle-slider[_ngcontent-%COMP%]{line-height:0}.refresh-button[_ngcontent-%COMP%]{cursor:pointer;line-height:0;transition:all 3s var(--transition-timing);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.refresh-button[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:18px;transform:rotate(45deg);color:var(--refresh-button-fg)}.refresh-button.refreshing[_ngcontent-%COMP%]{transform:rotate(1turn)}.header-breadcrumb[_ngcontent-%COMP%]{display:flex;align-items:center}.copy-button[_ngcontent-%COMP%]{margin-left:12px;font-size:0;cursor:pointer}.copy-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{fill:red;width:14px}app-loading-indicator[_ngcontent-%COMP%]{margin:0}.diagnose-side[_ngcontent-%COMP%]   .side-item[_ngcontent-%COMP%]{padding-bottom:21px;border-bottom:1px solid #414d55;margin-bottom:17px}.side-item-title[_ngcontent-%COMP%]{font:600 12px/20px Open Sans;color:var(--topic-policy-title);text-transform:capitalize;margin-bottom:12px;margin-top:0}.keyword[_ngcontent-%COMP%]{font:700 20px/32px Montserrat;color:var(--diagnose-side-keyword-fg)}.topic-policy[_ngcontent-%COMP%]{display:flex;margin-bottom:21px}.topic-policy[_ngcontent-%COMP%]:first-child{margin-right:20px}.policy-box[_ngcontent-%COMP%], .topic-box[_ngcontent-%COMP%]{width:50%}.policy-box[_ngcontent-%COMP%]:not(:last-child), .topic-box[_ngcontent-%COMP%]:not(:last-child){margin-right:20px}app-policy-guide[_ngcontent-%COMP%]:not(:last-child)  .policy, app-topic[_ngcontent-%COMP%]:not(:last-child)  .topic{margin-bottom:12px}app-progress-bar[_ngcontent-%COMP%]:not(:last-child)  .progress-bar{margin-bottom:20px}.button-group[_ngcontent-%COMP%]{margin-top:26px;font-size:0;display:flex;justify-content:space-between;flex:1}.button-group[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{display:inline-block}app-diagnose-text[_ngcontent-%COMP%]  .diagnose-text{margin-bottom:25px}.deeper-box[_ngcontent-%COMP%]{opacity:0;visibility:hidden;transition:all var(--transition-speed) var(--transition-timing)}.deeper-box.show[_ngcontent-%COMP%]{opacity:1;visibility:visible}.deeper__title[_ngcontent-%COMP%]{color:var(--diagnose-deeper-title-fg);margin:0 0 16px;font-weight:400}.spelling-mistake[_ngcontent-%COMP%]{padding:13px 20px;background-color:var(--diagnose-deeper-item-bg);margin-bottom:30px}.spelling-mistake__text[_ngcontent-%COMP%]{font:700 20px/24px Montserrat;margin:0}.fail-topic__item[_ngcontent-%COMP%]{padding:6px 20px;display:flex;align-items:center;background-color:var(--diagnose-deeper-item-bg)}.fail-topic__item[_ngcontent-%COMP%]   app-topic[_ngcontent-%COMP%]{min-width:171px}.fail-topic__item[_ngcontent-%COMP%]   app-topic[_ngcontent-%COMP%]  .topic{margin-bottom:0}.fail-topic__text[_ngcontent-%COMP%]{margin-left:20px;font:700 20px/24px Montserrat}app-regression-test-box[_ngcontent-%COMP%]  .regression-wrapper{position:fixed;right:0;top:0;bottom:0;z-index:9999;width:600px}"]}),ve)}],xe=((me=function e(){_classCallCheck(this,e)}).\u0275mod=g.Lb({type:me}),me.\u0275inj=g.Kb({factory:function(e){return new(e||me)},imports:[[a.e.forChild(Ce)],a.e]}),me),_e=n("nEHF"),ye=n("XpXM");n.d(t,"DiagnoseModule",(function(){return ke}));var Oe,ke=((Oe=function e(){_classCallCheck(this,e)}).\u0275mod=g.Lb({type:Oe}),Oe.\u0275inj=g.Kb({factory:function(e){return new(e||Oe)},imports:[[r.c,c.b,xe,_e.a,ye.a]]}),Oe)}}]);